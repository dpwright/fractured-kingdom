%\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage[pass]{geometry}
\usepackage{graphicx}
\usepackage[svgnames]{xcolor}

\usepackage{titling}
\usepackage{lettrine}

\usepackage[copyright]{ccicons}
\usepackage{url}
\usepackage{hyperref}

\usepackage{fmtcount}

\usepackage{wrapfig}

% Fonts
%\usepackage{Royal}
%Setting this up manually as texpad doesn't have the Royal package (cfr-initials)
%The following is just the contents of that package pasted in-place
\input RoyalIn.fd
\DeclareRobustCommand{\Royal}{%
        \fontencoding{U}%
        \fontseries{xl}%
        \fontshape{n}%
        \fontfamily{RoyalIn}%
        \selectfont}
\DeclareTextFontCommand{\royal}{\Royal}

\usepackage{pgothic}

%Using this font instead of Alegreya, which isn't available in texpad
\usepackage{baskervald}
%\usepackage{Alegreya}

% Addition of a \subtitle command based on the version of \title
% in the titling packge.
\def\subtitle#1{%
  \gdef\@subtitle{#1}
  \begingroup
    \renewcommand{\thanks}[1]{}
    \renewcommand{\thanksmark}[1]{}
    \renewcommand{\thanksgap}[1]{}
    \protected@xdef\thesubtitle{#1}
  \endgroup}
   \def\@subtitle{}

% Use this instead of \maketitle
\newcommand*{\factionstitle}{\begingroup
\centering
\vspace*{0.08\textheight}
{\fontsize{40}{30}\selectfont\textsc{\@title}}\\[\baselineskip]
{\scshape \@subtitle}\\[\baselineskip]
{\scshape by}\\[\baselineskip]
{\large\scshape \@author}\\[\baselineskip]
\vspace*{0.125\textheight}
\includegraphics[width=0.75\textwidth]{images/sabilia-mark.jpg}\par
\endgroup}

% Try and handle overfull hboxes
\setlength{\emergencystretch}{2pt}

% Lettrine formatting
\setlength{\DefaultNindent}{0em}
\setcounter{DefaultLines}{5}
\newcommand*\initletter{\Royal}
\renewcommand{\LettrineFontHook}{\initletter}

% Title styling
\usepackage{titlesec}

\titleformat{\part}[display]
  {\thispagestyle{empty}\centering\bfseries\Huge}
  {\Large{\partname} {\thepart}}
  {0pt}
  {}

% Chapter style based on the one from this thread:
%   http://tex.stackexchange.com/questions/165878/width-of-chapter-section-with-titlesec
\newcommand\factionschapformat[1]{%
  \parbox[b]{\dimexpr\textwidth-3em\relax}{\raggedright#1}}
\titleformat{\chapter}[display]
  {\Huge}
  {\vspace{-8em}\raggedleft{
    {\color{RoyalBlue}\rule[-5pt]{2pt}{5cm}}\quad
    {\color{RoyalBlue}\fontsize{60}{60}\selectfont\thechapter}
    }
  }
  {-2.1em}
  {\factionschapformat}

\titleformat{\section}
  {\Large}
  {}
  {0pt}
  {}

\titleformat{\subsection}
  {\large}
  {}
  {0pt}
  {}
  [\titlerule]

\setcounter{secnumdepth}{0}

% Appendix styling (http://tex.stackexchange.com/questions/37357/no-page-number-on-appendixpage)
\usepackage{appendix}
\let\plainappendixpage\appendixpage
\makeatletter
\renewcommand{\appendixpage}{%
  \begingroup
  \let\ps@plain\ps@empty
  \plainappendixpage
  \endgroup}
\makeatother

% List styles
\renewcommand{\labelitemi}{}
